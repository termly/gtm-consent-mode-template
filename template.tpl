___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Termly Consent Management Platform",
  "categories": [
    "TAG_MANAGEMENT",
    "UTILITY"
  ],
  "brand": {
    "id": "termly",
    "displayName": "Termly",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEkAAABJCAYAAABxcwvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE7mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuZGFiYWNiYiwgMjAyMS8wNC8xNC0wMDozOTo0NCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIDIyLjQgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAyMS0xMS0wNVQxNToyODozMCswMzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0xMS0wNVQxNToyODozMCswMzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMjEtMTEtMDVUMTU6Mjg6MzArMDM6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmM5ZTA4MjYyLTcwMmUtOWQ0YS04MzAxLWNjMzY4ZmFmYTQ3NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpjOWUwODI2Mi03MDJlLTlk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\u003d"
  },
  "description": "Enables GTM consent preference functionality for Termly\u0027s Consent Management Platform.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "CHECKBOX",
    "name": "injectsResourceBlocker",
    "checkboxText": "Inject Termly consent management platform script tag",
    "simpleValueType": true,
    "defaultValue": false,
    "alwaysInSummary": true
  },
  {
    "type": "TEXT",
    "name": "websiteUUID",
    "displayName": "Termly Website UUID",
    "simpleValueType": true,
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "injectsResourceBlocker",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "scriptURL",
    "displayName": "Termly CMP Script URL",
    "simpleValueType": true,
    "defaultValue": "https://app.termly.io/embed.min.js",
    "enablingConditions": [
      {
        "paramName": "injectsResourceBlocker",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "^https://[^/]+/embed.min.js"
        ]
      }
    ],
    "notSetText": "ERROR: no URL is provided!"
  },
  {
    "type": "GROUP",
    "name": "Advanced Consent Management Settings",
    "displayName": "Advanced Consent Mode Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "url_passthrough",
        "checkboxText": "URL pass-through",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "CHECKBOX",
        "name": "ads_data_redaction",
        "checkboxText": "Ads data redaction",
        "simpleValueType": true,
        "defaultValue": false
      },
      {
        "type": "TEXT",
        "name": "wait_for_update",
        "displayName": "Wait for update",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "POSITIVE_NUMBER"
          }
        ],
        "defaultValue": 500,
        "valueUnit": "milliseconds"
      },
      {
        "type": "GROUP",
        "name": "Consent Defaults",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "SELECT",
            "name": "ad_storage",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "displayName": "ad_storage"
          },
          {
            "type": "SELECT",
            "name": "analytics_storage",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "displayName": "analytics_storage"
          },
          {
            "type": "SELECT",
            "name": "functionality_storage",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "displayName": "functionality_storage"
          },
          {
            "type": "SELECT",
            "name": "personalization_storage",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "displayName": "personalization_storage"
          },
          {
            "type": "SELECT",
            "name": "security_storage",
            "selectItems": [
              {
                "value": "denied",
                "displayValue": "Denied"
              },
              {
                "value": "granted",
                "displayValue": "Granted"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "denied",
            "displayName": "security_storage"
          }
        ],
        "displayName": "Consent Defaults"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const JSON = require('JSON');
const Object = require('Object');

const callInWindow = require('callInWindow');
const copyFromDataLayer = require('copyFromDataLayer');
const copyFromWindow = require('copyFromWindow');
const createQueue = require('createQueue');
const gtagSet = require('gtagSet');
const injectScript = require('injectScript');
const localStorage = require('localStorage');
const logToConsole = require('logToConsole');
const makeNumber = require('makeNumber');
const setDefaultConsentState = require('setDefaultConsentState');
const setInWindow = require('setInWindow');
const updateConsentState = require('updateConsentState');

const DEVELOPER_ID = 'dNzg2MD';
const IS_DEFAULT_STATE = 'is_default_state';
const LOCAL_STORAGE_KEY = 'termly_gtm_template_default_consents';
const UPDATE_COMPLETE_EVENT_NAME = 'Termly.consentSaveDone';

const GTM_TO_TERMLY = Object.freeze({
  ad_storage: 'advertising',
  analytics_storage: 'analytics',
  functionality_storage: 'performance',
  personalization_storage: 'performance',
  security_storage: 'essential',
  social_storage: 'social_networking',
  unclassified_storage: 'unclassified',
});

const EVENT_HANDLERS = Object.freeze({
  'gtm.init_consent': handleInitConsent,
  'userPrefUpdate': handleUserPrefUpdate,
});

// These values come from the template fields. User-selected
// consents will be merged atop these values and passed to the
// setDefaultConsentState functions.
//
const DEFAULT_CONSENT_CONFIG = Object.freeze({
  ad_storage: data.ad_storage,
  analytics_storage: data.analytics_storage,
  functionality_storage: data.functionality_storage,
  personalization_storage: data.personalization_storage,
  security_storage: data.security_storage,

  wait_for_update: makeNumber(data.wait_for_update),
});


(function main(data) {
  consoleLog('### TEMPLATE START');

  initializeCMP(data);
  installTermlyBlocker(data);

  const event = copyFromDataLayer('event');

  const handler = EVENT_HANDLERS[event] || handleForeignEvent;

  const result = handler(event, data);

  if ( result ) {
    triggerEvent(UPDATE_COMPLETE_EVENT_NAME);

    data.gtmOnSuccess();
  } else {
    data.gtmOnFailure();
  }

  consoleLog('### TEMPLATE END');
})(data);

function initializeCMP(config) {
  gtagSet('developer_id.' + DEVELOPER_ID, true);

  gtagSet({
    ads_data_redaction: config.ads_data_redaction,
    url_passthrough: config.url_passthrough
  });
}

function installTermlyBlocker(config) {
  if ( !config.injectsResourceBlocker ) {
    return;
  }

  consoleLog('Injecting window.TERMLY_CONFIG');

  const isConfigSet = setInWindow('TERMLY_CONFIG', {
    websiteUUID: config.websiteUUID,
  });

  if ( !isConfigSet ) {
    const existingConfig = copyFromWindow('TERMLY_CONFIG');

    consoleLog('ERROR: Could not install Termly consent management platform ' +
               'tag because window.TERMLY_CONFIG is already set:',
               existingConfig);
    return;
  }

  consoleLog('Injecting script', config.scriptURL);

  injectScript(config.scriptURL);
}

function handleInitConsent(event, config) {
  consoleLog('-- Handling event "' + event + '"');

  const defaultConsents = getDefaultConsents(config);
  saveConsentState(defaultConsents, IS_DEFAULT_STATE);

  return true;
}

function handleUserPrefUpdate(event) {
  consoleLog('-- Handling event "' + event + '"');

  const termlyConsentSettings = callInWindow('Termly.getConsentState');

  if ( !termlyConsentSettings ) {
    consoleLog('window.Termly.getConsentState() was either not found or returned nothing');

    return false;
  }

  consoleLog('Consent settings returned by window.Termly.getConsentState():', termlyConsentSettings);

  const gtmConsentState = convertConsent(termlyConsentSettings);

  saveConsentState(gtmConsentState);

  return true;
}

function handleForeignEvent(event) {
  consoleLog('-- Unhandled event "' + event + '"');

  return true;
}

function getDefaultConsents(config) {
  const defaults = localStorage.getItem(LOCAL_STORAGE_KEY) || '{}';

  return merge(DEFAULT_CONSENT_CONFIG, JSON.parse(defaults));
}

function consoleLog(){
  const stringArgs = arguments.map((argument) => {
    return ( typeof argument === 'string' ) ? argument : JSON.stringify(argument);
  });

  logToConsole('[Termly CMP] ' + stringArgs.join(' '));
}

function convertConsent(termlyConsent) {
  const consents = {};

  forEachEntry(GTM_TO_TERMLY, (gtmKey, termlyKey) => {
    consents[gtmKey] = convertValue(termlyConsent[termlyKey]);
  });

  return consents;
}

function convertValue(isConsented) {
  return ( isConsented ) ? 'granted' : 'denied';
}

function saveConsentState(state, action) {
  const save = ( action === IS_DEFAULT_STATE ) ? setDefaultConsentState : updateConsentState;

  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(state));

  save(state);
}

function triggerEvent(eventName) {
  const dataLayerPush = createQueue('dataLayer');

  dataLayerPush({
    event: eventName,
  });
}

function merge() {
  const obj = {};

  for ( const arg of arguments ) {
    forEachEntry(arg, (key, value) => {
      obj[key] = value;
    });
  }

  return obj;
}

function forEachEntry(object, visitor) {
  // No spread operator, no destructuring. Thanks for bringing me
  // back to 1999, Google.
  Object.entries(object)
    .forEach((entry) => {
      visitor(entry[0], entry[1]);
  });
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "social_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "wait_for_update"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "unclassified_storage"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "termlyConsentSettings"
              },
              {
                "type": 1,
                "string": "event"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "Termly.getConsentState"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "TERMLY_CONFIG"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_local_storage",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "termly_gtm_template_default_consents"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ads_data_redaction"
              },
              {
                "type": 1,
                "string": "developer_id.dNzg2MD"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://app.termly.io/embed.min.js"
              },
              {
                "type": 1,
                "string": "https://*.trmly.net/embed.min.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 11/16/2021, 11:54:14 PM


